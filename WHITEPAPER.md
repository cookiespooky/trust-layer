# Recca Trust Layer

## 1. Аннотация

Recca - это универсальный механизм учёта заслуг между людьми и организациями на основе событий. Он позволяет отслеживать, оценивать и визуализировать вклад каждого участника в реферальных и партнёрских системах, используя графовую модель с направленными весами. Recca состоит из ядра (Recca Trust Layer) и прикладной надстройки (Recca Referral System).

## 2. Введение

Современные реферальные и партнёрские системы страдают от непрозрачности, централизованного учёта и отсутствия механизма справедливого распределения заслуг. Recca решает эти проблемы через событийно-ориентированный доверенный слой, позволяющий формировать репутацию и вознаграждать участников на основе их вклада, а не формальных ролей.

## 3. Цель проекта

Создать открытую систему доверия и реферальных взаимодействий между людьми и компаниями с распределением заслуг на основе прозрачного графа событий.

## 4. Ключевые принципы

- **Immutable events** - события не изменяются после создания.
- **Сильная типизация** - роли и события строго определены.
- **Интерпретируемость** - можно отследить вклад каждого участника.
- **Графовая модель** - система строится как направленный взвешенный граф.

## 5. Архитектура

> Основная задача любой теории... - сделать так, чтобы базовые элементы были максимально просты и так малочисленны, как только возможно без ущерба для адекватного представления... о том, что мы наблюдаем на практике.
> 
> *Альберт Эйнштейн*

### 5.1 Компоненты

- [**Recca Trust Layer**](#Архитектура) - ядро, хранящее и обрабатывающее события, роли и веса.
- [**Recca Referral System**](#Recca Referral System) - прикладной уровень, использующий ядро для учёта и выплаты вознаграждений.

### 5.2 Базовые сущности

|Сущность| Описание                                            |
|---|---|
|`Entity`| Устойчивый участник: человек, компания, оффер       |
|`Event`| Поток взаимодействия: покупка, рекомендация, заявка |
|`Role`| Роль сущности в событии (агент, покупатель и т.д.)  |
|`Type`| Тип события: продажа, рекомендация, партнёрство     |
|`Weight`| Мера значимости потока - влияет на распределение    |
|`Score`| Производные метрики: доверие, репутация и др.       |

## 6. Динамика системы

### 6.1 Потоки и обратные связи

Recca Trust Layer - это универсальный механизм учёта взаимодействий (flows, потоки) между сущностями (stocks, запасы), которые выражаются в виде событий и формируют динамику системы, с возможностью измерения вклада (weights, вес), построения доверия и отслеживания сетевых эффектов. Оно не зависит от конкретного бизнес-кейса и может быть использовано в разных системах: от рефералок до DAO.

Система живёт за счёт взаимодействий: каждый поток не просто соединяет два узла, но модифицирует поведение как отдельных сущностей, так и всей сети. Эти модификации могут усиливаться или ослабляться через обратные связи.

Обратная связь возникает, когда результат действия в системе влияет на причину этого действия в будущем:

- **Усиливающие петли (reinforcing loops)** - положительная обратная связь, где каждое новое взаимодействие увеличивает вероятность следующих: больше вклада → больше веса → больше вовлечения.
	- Пример: пользователь привёл клиента → получил вес за успешную рекомендацию → система повышает его видимость/рейтинг → он привлекает больше клиентов → и так далее.

- **Стабилизирующие петли (balancing loops)** - отрицательная обратная связь, стремящаяся ограничить рост и удержать систему в равновесии: отсутствие результата → снижение веса → балансировка.
	- Пример: слишком частая рекомендация без покупок → снижение веса → меньше показов → меньше новых взаимодействий.

Таким образом, система сама формирует поведенческие паттерны, которые либо поддерживают рост, либо регулируют его. 

### 6.2 Распределение веса

Мы вводим понятие награды через распределение потока, в котором вес одного события влияет на перераспределение будущих потоков. Это создаёт основу для реферальных каскадов и сетевых эффектов:

- Вес передаётся по графу с затуханием: чем ближе к источнику события, тем больше вклад.
- Каждый участник системы получает свою долю, в зависимости от веса его связей в цепочке.
- Это стимулирует вовлечение в долгосрочные и качественные связи, а не в разовые действия.

## 7. Вес как функция

- **Функция от события и контекста**, а не просто константа.
- Может учитывать:
    - Объём сделки
    - Временной decay
    - Историю взаимодействий
    - Уникальность связей (например, первое касание ценнее)

Дает возможности:
- задать кастомную формулу `calculateWeight(event)` делает Trust Layer более гибким.
- задать разные модели распределения веса:
	- Линейная
	- Логарифмическая
	- Основанная на доверии    
- экспериментировать с эффектами, как в системной динамике (например, запустить симуляции)

## 8. Пример

Допустим, пользователь А рекомендует товар пользователя B, а пользователь C покупает этот товар. Тогда создаются следующие потоки:

1. A → B: рекомендация (flow) с весом 0.8.
2. C → B: покупка (flow) с весом 1.0.
3. A ← вес от события C→B через путь влияния, с затуханием (например, 0.5).

В результате:

- B увеличивает свою ценность как продавец.
- A получает заслуженный вклад за опосредованную продажу.
- Система усиливает A как качественного агента.

A получает вознаграждение, B - прибыль, система усиливает обоих.

## 9. Распределение и трассировка заслуг

Каждое событие порождает цепочку влияния (как дерево коммитов в Git):

- Можно восстановить вклад любого участника
- Позволяет создавать zero-knowledge доказательства
- Обеспечивает прозрачность расчётов и справедливое вознаграждение

## 10. Потенциал визуализации

Система визуально представляется в виде графа:

- **Узлы (nodes)** - stocks, устойчивые сущности.
- **Рёбра (edges)** - flows, события, связывающие сущности.
- **Вес ребра (weight)** - количественная характеристика потока: сколько ценности, доверия, влияния или заслуги было передано в результате события.

**Потенциал визуализации**

- Обратные петли (CLD) можно извлекать из графа (циклы + веса)
- Возможность визуализировать:
    - Личную карту вклада
    - Сеть партнёров
    - Древо распространения конкретного оффера

## 11. Recca Referral System

### Роль: клиент Trust Layer через API

> Recca Referral System - это прикладной сервис, использующий ядро как механизм учёта заслуг в реферальной цепочке.
### Что делает Referral System:

| Действие пользователя       | Что происходит в ядре                                                      |
| --------------------------- | -------------------------------------------------------------------------- |
| Агенты рекомендуют оффер    | Создаются `events` между агентом и продавцом                               |
| Пользователь делает покупку | Создаётся `event` с типом `purchase`, `roles`: покупатель, продавец, агент |
| Расчёт вклада               | Через веса событий (`weights`), вычисляется вклад всех участников          |
| Распределение комиссии      | API ядра возвращает пропорции, по которым Recca начисляет выплаты          |

### Пример взаимодействия

1. **Создание оффера** → `entity` с типом `offer`, создаётся `event`.
2. **Рекомендация** → создаётся `event` типа `referral` с агентом, вес = 0.8.
3. **Покупка** → `event` типа `purchase` с покупателем, вес = 1.0.
4. **Recca** запрашивает `GET /weights?event_id=XYZ` → получает вклад всех участников.
5. **Recca** начисляет комиссию пропорционально.

`event` с типом `партнерство` = явное соглашение между участниками взаимодействия.

Возможность добавить:
- Условия (например: вступает в силу после 3 успешных покупок)
- Метки (`tag`: "вручную подтверждён", "массовая рассылка", "подарок")
- Временные ограничения (`expires_at`, `cooldown`)

## 12. Развитие

- Поддержка decay во времени
- No-code интерфейс для расчётных формул
- Подписи событий, DID, PGP, wallet
- Хранение в IPFS / blockchain
- DAO-механики

## 13. Заключение

Recca формализует заслуги, делает вклад прозрачным и даёт инструмент честного вознаграждения. Он применим в реферальных программах, маркетинге, комьюнити, DAO и других сферах, где важно учитывать вклад каждого.

"Recca считает заслуги - вы решаете, как их вознаградить."

## 14. Use Cases

|Сфера|Применение|
|---|---|
|Онлайн-курсы|Учёт вклада агентов, преподавателей и учеников в распространение курсов|
|SaaS-продукты|Распределение реферальных бонусов и идентификация ключевых каналов роста|
|Маркетинг-агентства|Учёт вкладов подрядчиков, дизайнеров, менеджеров в успех кампаний|
|DAO / Web3|Прозрачное распределение заслуг в сообществах на базе децентрализованных голосов|
|Комьюнити и клубы|Поддержка репутационных баллов и доверия за вклад в сообщество|
## 15. Конкурентные преимущества

Сравнение Recca с альтернативами:

| Критерий                 | Recca             | Традиционные<br>CRM/Referral системы |
| ------------------------ | ----------------- | ------------------------------------ |
| Прозрачность             | Да                | Нет                                  |
| Поддержка графа          | Да                | Ограничена                           |
| Расчёт цепочки вклада    | Да (с затуханием) | Нет (линейный учёт)                  |
| Возможность кастомизации | Высокая           | Низкая                               |
| DAO-ready                | Да                | Нет                                  |

## 16. Модель монетизации

Если ты собираешься зарабатывать на Recca - опиши, как:

- SaaS-подписка за API
- % от оборота/выплат через платформу
- White-label лицензии для партнёров
- Комиссия за транзакции
- Платный доступ к расширенной визуализации и аналитике

## 17. Roadmap

| Квартал | Этап                                                                            |
| ------- | ------------------------------------------------------------------------------- |
| Q3 2025 | MVP ядра + API + визуализация + Recca Referral System, первые партнеры          |
| Q4 2025 | SDK, оптимизация производительности                                             |
| 2026    | AI-интерпретация, анализ паттернов и закономерностей, аналитика и моделирование |

## 19. Ссылки
    
- [recca.me](https://recca.me)
- [Playground](https://recca.me/simulation)
